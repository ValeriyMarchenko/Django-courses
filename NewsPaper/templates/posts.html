{% extends 'flatpages/default.html' %} 
{% load custom_filters %}

{% block title %}
Posts
{% endblock title %}

{% block content %}
    <h1>All news: {{ posts|length }}</h1>
    <h3> {{ time_now|date:'M d Y' }} </h3>
    <hr>
    
    {% if posts %}
        <table>
                <tr>
                    <td>
                        Name
                    </td>
                    <td>
                        Date
                    </td>
                    <td>
                        Description
                    </td>
                </tr>
            {% for post in posts%}
                <tr>
                    <td>
                        {{post.title|censor}}
                    </td>
                    <td>
                        {{ post.dateCreation|date:'M d Y' }}
                    </td>
                    <td>
                        {{ post.text|truncatewords:50|censor }}
                    </td>
                </tr>
            {% endfor %}
            </table>
        {% else %}
            <h2>Nothing to view</h2>
        {% endif %}
{% endblock content %}